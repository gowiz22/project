<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="com.petti.repository.product_board.ProductLikeRepository">

	<insert id="insert">
		insert into product_score(memberId,pno,score) values(#{memberId}, #{pno}, #{score})
	</insert>
 
	<select id="get" resultType="productLikeDTO">
		select * from product_score where pno=#{pno} and memberId=#{memberId}	
	</select>
 	
 	<delete id="delete">
 		delete from product_score where pno=#{pno} and memberId=#{memberId}
 	</delete>
 	
 	<update id="update">
 		update product_score set 
 			score = #{score} 
		where pno=#{pno} and memberId=#{memberId}
 	</update>
 	
 	<select id="findLikeUser" resultType="string">
 		select memberId from product_score where pno=#{pno}
 	</select>
 	
 	<select id="getScoreRate" resultType="double">
 		select avg(score) as rate from PRODUCT_SCORE where pno = 3
 	</select>
 	
</mapper>